(function(t){function e(e){for(var s,o,r=e[0],c=e[1],l=e[2],u=0,d=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);h&&h(e);while(d.length)d.shift()();return a.push.apply(a,l||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],s=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(s=!1)}s&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var s={},n={app:0},a=[];function o(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=s,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(i,s,function(e){return t[e]}.bind(null,s));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"06d5":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var s=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container",staticStyle:{"margin-top":"2rem"},attrs:{id:"app"}},[i("h1",{staticClass:"title"},[t._v("hekto Pixel GUI")]),i("b-tabs",{staticClass:"block",attrs:{type:"is-boxed"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[i("b-tab-item",[i("router-link",{attrs:{slot:"header",tag:"div",to:{name:"home"}},slot:"header"},[t._v("Home")])],1),i("b-tab-item",[i("router-link",{attrs:{slot:"header",tag:"div",to:{name:"preview"}},slot:"header"},[t._v("Preview")])],1),i("b-tab-item",[i("router-link",{attrs:{slot:"header",tag:"div",to:{name:"update"}},slot:"header"},[t._v("Update")])],1),i("b-tab-item",[i("router-link",{attrs:{slot:"header",tag:"div",to:{name:"fs"}},slot:"header"},[t._v("File System")])],1)],1),i("router-view")],1)},a=[],o=(i("b0c0"),{data:function(){return{activeTab:null}},created:function(){var t=0;switch(this.$router.currentRoute.name){case"update":t=2;break;case"preview":t=1;break;default:t=0;break}this.activeTab=t}}),r=o,c=(i("5c0b"),i("2877")),l=Object(c["a"])(r,n,a,!1,null,null,null),h=l.exports,u=i("8c4f"),d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h2",{staticClass:"subtitle"},[t._v("Animations")]),i("b-field",{attrs:{label:"Animation"}},[i("div",{staticClass:"is-flex"},[i("b-select",{attrs:{placeholder:"Select an animation"},model:{value:t.animationSelection,callback:function(e){t.animationSelection=e},expression:"animationSelection"}},t._l(t.animationNames,(function(e,s){return i("option",{key:s},[t._v(" "+t._s(e)+" ")])})),0),i("b-button",{staticStyle:{"margin-left":"1rem"},attrs:{type:"is-primary"},on:{click:t.sendPlay}},[t._v("Play")])],1)]),"text"===t.animationSelection?i("div",[i("pre",[t._v("Description: displays a scrolling text")]),i("div",{staticClass:"columns",staticStyle:{"margin-top":"1rem"}},[i("div",{staticClass:"column"},[i("b-field",{attrs:{label:"Text to show"}},[i("b-input",{model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}})],1)],1),i("div",{staticClass:"column is-1 has-text-centered"},[i("b-field",{staticClass:"has-text-centered",attrs:{label:"Color"}},[i("swatches",{attrs:{colors:"text-advanced"},model:{value:t.textColor,callback:function(e){t.textColor=e},expression:"textColor"}})],1)],1),i("div",{staticClass:"column"},[i("b-field",{attrs:{label:"Interval"}},[i("b-slider",{staticStyle:{"margin-top":"1.4rem"},attrs:{size:"is-large",min:30,max:300},model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}})],1)],1)])]):t._e(),"noise"===t.animationSelection?i("div",[i("pre",[t._v("Description: sets every pixel on the board to a random color")])]):t._e(),"artnet"===t.animationSelection?i("div",[i("pre",[t._v("Description: acts as an ArtNet client\n\n    Artnet settings: LED type RGB\n    Universe 1: 20 x 8, LED starting top - left, snakewise ( only 0 - 480 channels are used )\n    Universe 2: 20 x 7, LED starting top - left, snakewise ( only 0 - 420 channels are used )")])]):t._e(),"other"===t.animationSelection?i("div",[i("pre",[t._v("Description: you can type here a name of the new animation to be shown")]),i("b-field",{staticStyle:{"margin-top":"1rem"},attrs:{label:"Animation to show"}},[i("b-input",{model:{value:t.animationName,callback:function(e){t.animationName=e},expression:"animationName"}})],1)],1):t._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:"sketch"===t.animationSelection,expression:"animationSelection === 'sketch'"}]},[i("div",{staticClass:"has-text-centered is-flex"},[i("div",{staticClass:"is-flex",staticStyle:{flex:"1"}},[i("canvas",{attrs:{id:"sketchpad"}}),i("swatches",{attrs:{colors:"text-advanced"},on:{input:t.changeColor},model:{value:t.sketchpadColor,callback:function(e){t.sketchpadColor=e},expression:"sketchpadColor"}})],1),i("canvas",{attrs:{id:"hektopixel"}})]),i("b-button",{staticClass:"is-primary",on:{click:t.clear}},[t._v("clear")]),i("b-button",{staticClass:"is-primary",on:{click:t.animate}},[t._v("animate")]),i("b-button",{staticClass:"is-primary",on:{click:t.cancelAnimation}},[t._v("cancel animation")]),i("b-button",{staticClass:"is-primary",on:{click:t.reset}},[t._v("reset animation")]),i("b-button",{staticClass:"is-primary",on:{click:t.undo}},[t._v("undo")]),i("b-button",{staticClass:"is-primary",on:{click:t.redo}},[t._v("redo")])],1),i("b-notification",{staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-danger","aria-close-label":"Close",active:t.isError},on:{"update:active":function(e){t.isError=e}}},[t._v(" "+t._s(t.errorMsg)+" ")])],1)},f=[],p=(i("c0b6"),i("d3b7"),i("e25e"),i("ac1f"),i("5319"),i("4795"),i("cb29"),i("4de4"),i("4160"),i("c975"),i("a434"),i("ace4"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("20bf"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a9"),i("72f7"),i("159b"),i("284c")),v=i("9f12"),m=i("53fe"),b=function(){function t(e){Object(v["a"])(this,t),e.canvas=e.canvas||e.element,e.canvas&&("string"===typeof e.canvas&&(e.canvas=document.querySelector(e.canvas)),this.canvas=e.canvas,"string"===typeof e.destination?e.destination=document.querySelector(e.destination):this.destination=document.createElement("canvas"),this.destination=e.destination,["width","height","color","penSize","readOnly"].forEach((function(t){this[t]=e[t]||this.canvas.getAttribute("data-"+t)}),this),this.width=this.width||0,this.height=this.height||0,this.color=this.color||"#000",this.penSize=this.penSize||5,this.readOnly=this.readOnly||!1,this.strokes=e.strokes||[],this.undoHistory=e.undoHistory||[],this.onMouseMove=this.onMouseMove.bind(this),this.events={},this.events["mousemove"]=[],this.events["animation-end"]=[],this.events["show"]=[],this.internalEvents=["MouseDown","MouseUp","MouseOut"],this.internalEvents.forEach((function(t){var e=this,i=t.toLowerCase();this.events[i]=[],this["on"+t]=this["on"+t].bind(this),this.canvas.addEventListener(i,(function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return e.trigger(i,s)}))}),this),this.reset())}return Object(m["a"])(t,[{key:"_position",value:function(t){var e=this.canvas.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop;return{x:t.pageX-e.left+i,y:t.pageY-e.top-s}}},{key:"_stroke",value:function(t){"clear"===t.type?this.drawBlack():t.lines.forEach((function(e){this._line(e.start,e.end,t.color,t.size)}),this)}},{key:"_draw",value:function(t,e,i,s){this._line(t,e,i,s,"source-over"),this.resize()}},{key:"_erase",value:function(t,e,i,s){this._line(t,e,i,s,"destination-out")}},{key:"_line",value:function(t,e,i,s,n){this.context.save(),this.context.lineJoin="round",this.context.lineCap="round",this.context.strokeStyle=i,this.context.lineWidth=s,this.context.globalCompositeOperation=n,this.context.beginPath(),this.context.moveTo(t.x,t.y),this.context.lineTo(e.x,e.y),this.context.closePath(),this.context.stroke(),this.context.restore()}},{key:"onMouseDown",value:function(t){this._sketching=!0,this._lastPosition=this._position(t),this._currentStroke={color:this.color,size:this.penSize,lines:[]},this.canvas.addEventListener("mousemove",this.onMouseMove)}},{key:"onMouseUp",value:function(){this._sketching&&(this.strokes.push(this._currentStroke),this._sketching=!1),this.canvas.removeEventListener("mousemove",this.onMouseMove)}},{key:"onMouseOut",value:function(t){this.onMouseUp(t)}},{key:"onMouseMove",value:function(t){var e=this._position(t);this._draw(this._lastPosition,e,this.color,this.penSize),this._currentStroke.lines.push({start:this._lastPosition,end:e}),this._lastPosition=e,this.trigger("mousemove",[t])}},{key:"toObject",value:function(){return{width:this.canvas.width,height:this.canvas.height,strokes:this.strokes,undoHistory:this.undoHistory}}},{key:"toJSON",value:function(){return JSON.stringify(this.toObject())}},{key:"resize",value:function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=this.width,t.height=this.height;var i=t.width/50>>1;e.filter="blur(".concat(i,"px)"),e.drawImage(this.canvas,0,0),this.destinationContext.drawImage(t,0,0,20,15);for(var s=this.destinationContext.getImageData(0,0,20,15),n=[],a=0;a<s.data.length;a+=4)n.push([s.data[a],s.data[a+1],s.data[a+2]]);for(var o=[],r=0;r<15;r++)for(var c=0;c<20;c++){var l=r%2===0?20*(r-r%2)+c:20*(r+1)-c-1;o.push(n[l][0]),o.push(n[l][1]),o.push(n[l][2])}var h=Uint8Array.from(o);this.trigger("show",[h])}},{key:"redo",value:function(){var t=this.undoHistory.pop();t&&(this.strokes.push(t),this._stroke(t)),this.resize()}},{key:"undo",value:function(){this.drawBlack();var t=this.strokes.pop();this.redraw(),t&&this.undoHistory.push(t)}},{key:"clear",value:function(){this.strokes.push({type:"clear"}),this.drawBlack(),this.resize()}},{key:"redraw",value:function(){this.strokes.forEach((function(t){this._stroke(t)}),this),this.resize()}},{key:"reset",value:function(){var t=this;this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.destinationContext=this.destination.getContext("2d"),this.destination.width=20,this.destination.height=15,this.drawBlack(),this.cancelAnimation(),this.redraw(),this.internalEvents.forEach((function(e){return t.off(e.toLowerCase())})),this.readOnly||this.internalEvents.forEach((function(e){return t.on(e.toLowerCase(),t["on"+e])}))}},{key:"cancelAnimation",value:function(){this.animateIds=this.animateIds||[],this.animateIds.forEach((function(t){clearTimeout(t)})),this.animateIds=[]}},{key:"drawBlack",value:function(){this.context.beginPath(),this.context.rect(0,0,this.width,this.height),this.context.fillStyle="black",this.context.fill()}},{key:"animate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e;this.cancelAnimation(),this.drawBlack(),this.strokes.forEach((function(i){if("clear"===i.type)return n+=e,t.animateIds.push(setTimeout((function(){t.drawBlack()}),n));i.lines.forEach((function(s){n+=e,t.animateIds.push(setTimeout((function(){t._draw(s.start,s.end,i.color,i.size)}),n))}))})),i&&this.animateIds.push(setTimeout((function(){t.animate(e=10,i,s)}),n+e+s)),this.animateIds.push(setTimeout((function(){t.trigger("animation-end",[e,i,s])}),n+e))}},{key:"on",value:function(t,e){void 0!==this.events[t]&&this.events[t].push(e)}},{key:"off",value:function(t,e){if(e){var i=this.events[t].indexOf(e);return-1!==i&&this.events[t].splice(i,1),-1!==i}this.events[t]=[]}},{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.events[t].forEach((function(t){t.apply(void 0,Object(p["a"])(e))}))}}]),t}();window.Sketchpad=b;var g=b,y=i("468d"),k=i.n(y),w=i("2ef0"),_=i.n(w),x=(i("2fac"),{name:"home",components:{Swatches:k.a},data:function(){return{animationNames:["text","plasma","noise","artnet","sketch","other"],animationSelection:"text",animationName:"",msg:"hello :)",textColor:"#FF0000",interval:50,sketchpad:null,sketchpadColor:"#2cffd4",isSuccess:!1,isError:!1,errorMsg:"Something went wrong."}},beforeDestroy:function(){this.$disconnect()},mounted:function(){this.$connect(),this.sketchpad=new g({element:"#sketchpad",destination:"#hektopixel",width:400,height:300}),this.changeColor(),this.sketchpad.penSize=10,this.sketchpad.on("show",this.sendData)},methods:{hexToRGB:function(t){var e=t.replace("#",""),i=parseInt(e.substring(0,2),16),s=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16);return{r:i,g:s,b:n}},changeColor:function(){this.sketchpad.color=this.sketchpadColor},sendData:_.a.throttle((function(t){this.$socket&&this.$socket.send(t)}),25),clear:function(){this.sketchpad.clear()},cancelAnimation:function(){this.sketchpad.cancelAnimation()},animate:function(){this.sketchpad.animate(25,!0)},reset:function(){this.sketchpad.reset()},undo:function(){this.sketchpad.undo()},redo:function(){this.sketchpad.redo()},sendPlay:function(){var t=this,e=this.animationSelection,i={};"text"===this.animationSelection&&(i["msg"]=this.msg,i["color"]=this.hexToRGB(this.textColor),i["interval"]=this.interval),"sketch"===this.animationSelection?setTimeout(function(){this.$connect("ws://"+window.location.host+"/sketch")}.bind(this),1e3):this.$disconnect(),"other"===this.animationSelection&&(e=this.animationName),fetch("http://"+window.location.host+"/animation/play/"+e,{method:"POST",headers:{},body:JSON.stringify(i)}).then((function(){t.isSuccess=!0}))["catch"]((function(e){t.isError=!0,t.errorMsg=e}))}}}),S=x,C=(i("cccb"),Object(c["a"])(S,d,f,!1,null,null,null)),E=C.exports,O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{},[i("h2",{staticClass:"subtitle"},[t._v("Update")]),i("p",{staticStyle:{"margin-bottom":"1rem"}},[t._v("Here you can update firmware by uploading bin file")]),i("b-field",{staticClass:"file"},[i("b-upload",{attrs:{disabled:t.isUploading},on:{input:function(e){return t.filesChange(e)}},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}},[i("a",{staticClass:"button is-primary"},[i("b-icon",{attrs:{icon:"upload"}}),i("span",[t._v("Click to select file")])],1)]),t.file?i("span",{staticClass:"file-name"},[t._v(" "+t._s(t.file.name)+" ")]):t._e()],1),i("b-button",{staticClass:"is-primary",attrs:{disabled:!t.isFile||t.isUploading},on:{click:t.submitFile}},[t._v("Submit")]),i("b-notification",{directives:[{name:"show",rawName:"v-show",value:t.isUploading,expression:"isUploading"}],staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-info",closeable:!1}},[t._v(" Wait for file to be uploaded... ")]),i("b-notification",{staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-success","aria-close-label":"Close",active:t.isSuccess},on:{"update:active":function(e){t.isSuccess=e}}},[t._v(" Firmware has been uploaded successfully ")]),i("b-notification",{staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-danger","aria-close-label":"Close",active:t.isError},on:{"update:active":function(e){t.isError=e}}},[t._v(" "+t._s(t.errorMsg)+" ")])],1)},A=[],M={name:"update",data:function(){return{file:null,formData:null,isFile:!1,isUploading:!1,isSuccess:!1,isError:!1,errorMsg:"Something went wrong."}},methods:{filesChange:function(t){this.formData=new FormData,this.isFile=!0,this.formData.append("file",t)},submitFile:function(){var t=this;this.isUploading=!0,fetch("http://"+window.location.host+"/update",{method:"POST",headers:{},body:this.formData}).then((function(){t.isSuccess=!0,t.isUploading=!1}))["catch"]((function(e){t.isError=!0,t.isUploading=!1,t.errorMsg=e}))}}},U=M,D=Object(c["a"])(U,O,A,!1,null,null,null),P=D.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h2",{staticClass:"subtitle"},[t._v("Preview")]),i("div",{staticClass:"previewGrid"},t._l(15,(function(e){return i("div",{key:e,staticClass:"cellRow"},t._l(20,(function(s){return i("div",{key:s,staticClass:"cell",style:"background: "+t.hexArray[(e%2===1?20*(e-e%2)+s:20*(e-e%2)-s+1)-1]},[t._v(" "+t._s(e%2===1?20*(e-e%2)+s:20*(e-e%2)-s+1)+" ")])})),0)})),0)])},j=[],z=(i("0d03"),i("25f0"),{name:"preview",data:function(){return{hexArray:[],statusMsg:"",isSuccess:!1,isError:!1,errorMsg:"Something went wrong."}},beforeDestroy:function(){this.$disconnect()},methods:{},mounted:function(){this.$connect("ws://"+window.location.host+"/ws");var t=this;this.$options.sockets.onmessage=function(e){new Response(e.data).arrayBuffer().then((function(e){for(var i,s,n=new Uint8Array(e),a=[],o="",r=0;r<n.length;r++)switch(r%3){case 0:i=("0"+n[r].toString(16)).substr(-2);break;case 1:s=("0"+n[r].toString(16)).substr(-2);break;case 2:o=("0"+n[r].toString(16)).substr(-2),a.push("#"+i+s+o);break}t.hexArray=a}))}}}),F=z,I=(i("8232"),Object(c["a"])(F,T,j,!1,null,null,null)),N=I.exports,$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("h2",{staticClass:"subtitle"},[t._v("File system")]),i("b-progress",{attrs:{type:t.percentageType,value:t.usedPercentage,"show-value":"",size:"is-large"}},[t._v(" using "+t._s(t.used)+" bytes of "+t._s(t.total)+" bytes total - "+t._s(t.usedPercentage)+"% ")]),i("div",[i("nav",{staticClass:"breadcrumb",attrs:{"aria-label":"breadcrumbs"}},[i("ul",[t._l(t.pathArray,(function(e,s){return[i("li",{key:s},[0===s?i("b-icon",{attrs:{icon:"home"}}):t._e(),0===s?i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){t.pathArray=[""]}}},[t._v("root")]):i("a",{attrs:{href:"javascript:void(0);"}},[t._v(t._s(e))])],1)]}))],2)]),i("ul",{staticClass:"filelist"},[t.pathArray.length>1?i("li",[i("b-icon",{attrs:{icon:"folder"}}),i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){return e.preventDefault(),t.pathArray.pop()}}},[t._v("..")])],1):t._e(),t._l(t.fileList,(function(e,s){return i("li",{key:s},[i("div",[i("b-icon",{staticStyle:{"margin-right":".5rem"},attrs:{icon:e.type}}),"file"===e.type?i("a",{attrs:{href:"/"+e.name}},[t._v(t._s(e.name))]):t._e(),"folder"===e.type?i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(i){return i.preventDefault(),t.pathArray.push(e.name)}}},[t._v(t._s(e.name))]):t._e()],1),i("div",[t._v(t._s(e.size)+" bytes")]),i("div",["file"===e.type?i("b-button",{attrs:{size:"is-small",type:"is-danger"},on:{click:function(i){return t.deleteFile(e.name)}}},[t._v("delete file")]):t._e()],1)])}))],2),i("h2",{staticClass:"subtitle",staticStyle:{"margin-top":"6rem"}},[t._v("Upload a file to this folder")]),i("b-field",{staticClass:"file"},[i("b-upload",{attrs:{disabled:t.isUploading},on:{input:function(e){return t.filesChange(e)}},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}},[i("a",{staticClass:"button is-primary"},[i("b-icon",{attrs:{icon:"upload"}}),i("span",[t._v("Click to select file")])],1)]),t.file?i("span",{staticClass:"file-name"},[t._v(" "+t._s(t.file.name)+" ")]):t._e()],1),i("b-button",{staticClass:"is-primary",attrs:{disabled:!t.isFile||t.isUploading},on:{click:t.submitFile}},[t._v("Submit")]),i("b-notification",{directives:[{name:"show",rawName:"v-show",value:t.isUploading,expression:"isUploading"}],staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-info",closeable:!1}},[t._v(" Wait for file to be uploaded... ")]),i("b-notification",{staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-success","aria-close-label":"Close",active:t.isSuccess},on:{"update:active":function(e){t.isSuccess=e}}},[t._v(" Firmware has been uploaded successfully ")]),i("b-notification",{staticStyle:{"margin-top":"1rem"},attrs:{"has-icon":"",type:"is-danger","aria-close-label":"Close",active:t.isError},on:{"update:active":function(e){t.isError=e}}},[t._v(" "+t._s(t.errorMsg)+" ")])],1)],1)},B=[],L=(i("99af"),i("a15b"),i("1276"),i("d81a")),R={name:"filesystem",components:{BButton:L["a"]},data:function(){return{total:0,used:0,files:[],pathArray:[""],file:null,formData:null,isFile:!1,isUploading:!1,isSuccess:!1,isError:!1,errorMsg:"Something went wrong."}},computed:{percentageType:function(){return this.usedPercentage>80?"is-danger":"is-primary"},fileList:function(){var t=[],e=[],i=[];for(var s in this.files){var n=this.files[s].name.split("/");if(n.length-1===this.pathArray.length&&n[this.pathArray.length-1]===this.pathArray[this.pathArray.length-1])t.push({type:"file",name:n[this.pathArray.length],size:this.files[s].size});else if(n[this.pathArray.length-1]===this.pathArray[this.pathArray.length-1]){var a=n[this.pathArray.length];"undefined"===typeof i[a]&&(i[a]={filesNum:0,size:0}),i[a].filesNum++,i[a].size+=parseInt(this.files[s].size)}}for(var o in i)e.push({type:"folder",name:o,size:i[o].size,filesNum:i[o].filesNum});return e.concat(t)},usedPercentage:function(){return this.total>0?Math.round(this.used/this.total*100):null}},mounted:function(){this.getFiles()},methods:{getFiles:function(){var t=this;fetch("http://"+window.location.host+"/spiffs",{method:"GET"}).then((function(t){return t.json()})).then((function(e){e.total&&(t.total=e.total),e.used&&(t.used=e.used),e.files&&(t.files=e.files)}))["catch"]((function(e){t.isError=!0,t.errorMsg=e}))},filesChange:function(t){this.formData=new FormData,this.isFile=!0,this.formData.append("file",t)},deleteFile:function(t){var e=this,i="?path="+this.pathArray.join("/")+"/"+t;fetch("http://"+window.location.host+"/spiffs="+encodeURI(i),{method:"DELETE",headers:{},body:this.formData}).then((function(){e.getFiles(),e.isSuccess=!0,e.isUploading=!1}))["catch"]((function(t){e.isError=!0,e.errorMsg=t}))},submitFile:function(){var t=this;this.isUploading=!0;var e="";this.pathArray.length>1&&(e="?path="+this.pathArray.join("/")+"/"),fetch("http://"+window.location.host+"/spiffs"+encodeURI(e),{method:"POST",headers:{},body:this.formData}).then((function(){t.getFiles(),t.isSuccess=!0,t.isUploading=!1}))["catch"]((function(e){t.isError=!0,t.isUploading=!1,t.errorMsg=e}))}}},H=R,G=(i("5e11"),Object(c["a"])(H,$,B,!1,null,null,null)),J=G.exports;s["a"].use(u["a"]);var W=[{path:"/",name:"home",component:E},{path:"/update",name:"update",component:P},{path:"/preview",name:"preview",component:N},{path:"/fs",name:"fs",component:J}],q=new u["a"]({routes:W}),X=q,Y=i("b408"),K=i.n(Y),Q=i("289d");i("5abe");s["a"].use(Q["a"]),s["a"].use(K.a,"ws://"+window.location.host+"/ws",{connectManually:!0,reconnection:!0}),s["a"].config.productionTip=!1,new s["a"]({router:X,render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var s=i("9c0c"),n=i.n(s);n.a},"5ced":function(t,e,i){},"5e11":function(t,e,i){"use strict";var s=i("fd0c"),n=i.n(s);n.a},8232:function(t,e,i){"use strict";var s=i("06d5"),n=i.n(s);n.a},"9c0c":function(t,e,i){},cccb:function(t,e,i){"use strict";var s=i("5ced"),n=i.n(s);n.a},fd0c:function(t,e,i){}});